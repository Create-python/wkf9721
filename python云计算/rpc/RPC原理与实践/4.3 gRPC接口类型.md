# gRPC接口类型

gRPC有4种接口类型：

- **Unary RPC** （一元RPC）
- **Server Streaming RPC** （ 服务器流式RPC）
- **Client Streaming RPC** （ 客户端流式RPC）
- **Bidirectional Streaming RPC** （双向流式RPC）

对于底层的HTTP/2而言，这些都是数据流Steam，我们所说的接口类型是指进行一次gRPC调用的数据通讯流程（或数据流Stream的生命周期）。

### 1 Unary RPC

最简单的RPC类型，客户端发送单个请求并返回单个响应。

![一元模型](file:///D:/python%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/grpc/Python%20Web%E6%96%B9%E5%90%91%E8%AF%BE%E7%A8%8B/2-4%20RPC%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E8%B7%B5%EF%BC%88%E5%9B%9B%EF%BC%89%E2%80%94%E2%80%94gRPC/%E8%AF%BE%E4%BB%B6/RPC%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E7%8E%B0%E7%AC%AC%E5%9B%9B%E9%83%A8%E4%BB%BD%E8%AF%BE%E4%BB%B6/images/gRPC%E4%B8%80%E5%85%83%E6%A8%A1%E5%9E%8B.png)

### 2 Server Streaming RPC

服务器流式RPC类似于我们的简单示例，只是服务器可以返回多个响应信息。一旦客户端拥有所有服务器的响应，客户端就会完成。

![服务器流](file:///D:/python%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/grpc/Python%20Web%E6%96%B9%E5%90%91%E8%AF%BE%E7%A8%8B/2-4%20RPC%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E8%B7%B5%EF%BC%88%E5%9B%9B%EF%BC%89%E2%80%94%E2%80%94gRPC/%E8%AF%BE%E4%BB%B6/RPC%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E7%8E%B0%E7%AC%AC%E5%9B%9B%E9%83%A8%E4%BB%BD%E8%AF%BE%E4%BB%B6/images/grpc%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%B5%81.png)

### 3 Client Steaming RPC

客户端流式RPC也类似于我们的简单示例，只是客户端向服务器发送请求流而不是单个请求。服务器发送回单个响应。

![客户端流](file:///D:/python%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/grpc/Python%20Web%E6%96%B9%E5%90%91%E8%AF%BE%E7%A8%8B/2-4%20RPC%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E8%B7%B5%EF%BC%88%E5%9B%9B%EF%BC%89%E2%80%94%E2%80%94gRPC/%E8%AF%BE%E4%BB%B6/RPC%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E7%8E%B0%E7%AC%AC%E5%9B%9B%E9%83%A8%E4%BB%BD%E8%AF%BE%E4%BB%B6/images/grpc%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B5%81.png)

### 4 Bidirectional Streaming RPC

在双向流式RPC中，客户端和服务器可以按任何顺序独立的读写数据流。服务器可以在收到所有的请求信息后再返回响应信息，或者收到一个请求信息返回一个响应信息，或者收到一些请求信息再返回一些请求信息，等等都是可以的。

![双向流](file:///D:/python%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/grpc/Python%20Web%E6%96%B9%E5%90%91%E8%AF%BE%E7%A8%8B/2-4%20RPC%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E8%B7%B5%EF%BC%88%E5%9B%9B%EF%BC%89%E2%80%94%E2%80%94gRPC/%E8%AF%BE%E4%BB%B6/RPC%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E7%8E%B0%E7%AC%AC%E5%9B%9B%E9%83%A8%E4%BB%BD%E8%AF%BE%E4%BB%B6/images/grpc%E5%8F%8C%E5%90%91%E6%B5%81.png)